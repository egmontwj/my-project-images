<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Wang Jin Research Sphere</title>
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Widgets/widgets.css" rel="stylesheet" />
  <style>
    html, body, #cesiumContainer {
      width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden;
      font-family: sans-serif;
    }

    #infoPanel {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(255, 255, 255, 0.85);
      padding: 15px 30px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      z-index: 1000;
      text-align: center;
      white-space: nowrap;
    }

    #infoPanel h1 {
      margin: 0;
      color: #2c3e50;
      font-size: 2em;
    }

    #scaleBarContainer {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      background-color: rgba(255, 255, 255, 0.85);
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div id="cesiumContainer"></div>

  <div id="infoPanel">
    <h1>Wang Jin Research Results</h1>
  </div>

  <div id="scaleBarContainer"></div>

  <script>
    // Initialize Cesium Viewer with no terrain
    const viewer = new Cesium.Viewer('cesiumContainer', {
      animation: false,
      timeline: false,
      geocoder: false,
      homeButton: false,
      sceneModePicker: false,
      baseLayerPicker: false,
      navigationHelpButton: false,
      terrainProvider: new Cesium.EllipsoidTerrainProvider() // Flat Earth (no elevation)
    });

    // Add ScaleBar
    const scaleBar = new Cesium.ScaleBar({
      container: viewer.container,
      viewModel: new Cesium.ScaleBarViewModel({
        scene: viewer.scene
      })
    });
    document.getElementById('scaleBarContainer').appendChild(scaleBar.container);

    // Add custom Shenzhen tiles overlay
    const shenzhenLayer = viewer.imageryLayers.addImageryProvider(
      new Cesium.UrlTemplateImageryProvider({
        url: 'https://storage.googleapis.com/myearth-465423-bucket/shenzhen_tiles/{z}/{x}/{y}.png',
        tilingScheme: new Cesium.WebMercatorTilingScheme(),
        maximumLevel: 13,
        credit: 'Shenzhen POI Density'
      })
    );

    // Optional: Add Chicago overlay as separate layer (can toggle or leave it out)
    const chicagoLayer = viewer.imageryLayers.addImageryProvider(
      new Cesium.UrlTemplateImageryProvider({
        url: 'https://storage.googleapis.com/myearth-465423-bucket/chicago_tiles/{z}/{x}/{y}.png',
        tilingScheme: new Cesium.WebMercatorTilingScheme(),
        maximumLevel: 13,
        credit: 'Chicago POI Density',
        show: false  // set to false by default if only showing Shenzhen initially
      })
    );

    // Match the original <gmp-map-3d> globe view
    viewer.camera.setView({
      destination: Cesium.Cartesian3.fromDegrees(114.3055, 30.5928, 6000000), // center and range
      orientation: {
        heading: Cesium.Math.toRadians(0),
        pitch: Cesium.Math.toRadians(-90), /
